<header class="bg-surface-800 border-b border-surface-700 px-6 py-4">
  <div class="flex items-center justify-between">
    <!-- Logo & Title -->
    <div class="flex items-center gap-4">
      <div class="flex items-center gap-2">
        <svg class="w-8 h-8 text-primary-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" />
        </svg>
        <h1 class="text-xl font-bold text-surface-100">Producer/Consumer Simulation</h1>
      </div>

      <!-- Status Badge -->
      <div class="flex items-center gap-2 px-3 py-1.5 rounded-full bg-surface-700">
        <span class="w-2 h-2 rounded-full {{ statusColor() }} animate-pulse"></span>
        <span class="text-sm font-medium text-surface-300">{{ statusText() }}</span>
      </div>
    </div>

    <!-- Controls -->
    <div class="flex items-center gap-3">
      <!-- New Simulation -->
      <button (click)="newSimulation()" class="btn-secondary flex items-center gap-2" [disabled]="!isConnected()">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
        </svg>
        <span>New</span>
      </button>

      <!-- Replay Dropdown -->
      <div class="relative">
        <button (click)="toggleReplayDropdown()" class="btn-secondary flex items-center gap-2"
          [disabled]="!isConnected() || snapshots().length === 0">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
          </svg>
          <span>Replay</span>
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>

        @if (showReplayDropdown) {
        <div class="absolute right-0 mt-2 w-64 bg-surface-800 border border-surface-700 rounded-lg shadow-xl z-50">
          <div class="p-2">
            <div class="text-xs font-medium text-surface-400 px-2 py-1 mb-1">Select Snapshot</div>
            @for (snapshot of snapshots(); track snapshot.id) {
            <button (click)="selectSnapshot(snapshot.id)"
              class="w-full text-left px-3 py-2 rounded hover:bg-surface-700 transition-colors">
              <div class="text-sm text-surface-100">{{ snapshot.label || 'Snapshot ' + snapshot.id }}</div>
              <div class="text-xs text-surface-400">{{ snapshot.timestamp }}</div>
            </button>
            }
            @empty {
            <div class="px-3 py-2 text-sm text-surface-400">No snapshots available</div>
            }
          </div>
        </div>
        }
      </div>

      <!-- Start/Stop Button -->
      <button (click)="toggleSimulation()"
        class="flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200"
        [class]="isRunning() ? 'bg-red-600 hover:bg-red-700 text-white' : 'bg-green-600 hover:bg-green-700 text-white'"
        [disabled]="!isConnected()">
        @if (isRunning()) {
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z" />
        </svg>
        <span>Stop</span>
        } @else {
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <span>Start</span>
        }
      </button>
    </div>
  </div>
</header>