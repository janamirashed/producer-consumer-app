<div class="w-full h-full relative bg-gray-50 rounded-lg overflow-hidden">
    <!-- Fabric Canvas -->
    <canvas #canvas class="absolute inset-0 w-full h-full"></canvas>

    <!-- Placement Mode Indicator -->
    @if (placementMode() !== 'none') {
    <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 
                bg-white/95 backdrop-blur-sm border border-gray-200 
                rounded-full px-4 py-2 flex items-center gap-2 shadow-lg z-10">
        @if (placementMode() === 'queue') {
        <span class="w-3 h-3 rounded bg-emerald-500"></span>
        <span class="text-sm text-gray-700">Click anywhere to place a Queue</span>
        }
        @if (placementMode() === 'machine') {
        <span class="w-3 h-3 rounded bg-blue-500"></span>
        <span class="text-sm text-gray-700">Click anywhere to place a Machine</span>
        }
        @if (placementMode() === 'connect') {
        <span class="w-3 h-3 rounded bg-gray-700"></span>
        @if (connectionSourceId()) {
        <span class="text-sm text-gray-700">Now click the <strong>target</strong> element</span>
        } @else {
        <span class="text-sm text-gray-700">Click the <strong>source</strong> element first</span>
        }
        }
    </div>
    }

    <!-- Empty State -->
    @if (state().queues.length === 0 && state().machines.length === 0) {
    <div class="absolute inset-0 flex items-center justify-center pointer-events-none z-0">
        <div class="text-center">
            <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-gray-200 flex items-center justify-center">
                <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                        d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                </svg>
            </div>
            <h3 class="text-lg font-medium text-gray-500 mb-2">No elements yet</h3>
            <p class="text-sm text-gray-400 max-w-xs">
                Click "Add Queue" or "Add Machine" in the toolbar, then click anywhere here to place
            </p>
        </div>
    </div>
    }
</div>